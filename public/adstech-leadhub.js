window.onload=adstechLeadhubOnload;var atLh_acId="",atLh_topic="",atLh_fb="",atLh_zl="",atLh_url=window.location.href,atLh_utm_source=null,atLh_utm_medium=null,atLh_utm_campaign=null,atLh_utm_term=null,atLh_utm_content=null,atLh_gclid=null,atLh_arrTrack=[],atLh_styleBtnChat="",atLh_chatminiCRM=null,atlh_check_devide=!1,atLh_rqApi="https://services.adstech.vn/leadpool/v1/leadhub";function adstechLeadhubOnload(){var t=document.createElement("script");t.src="https://cdn.firebase.com/js/client/2.2.1/firebase.js",document.getElementsByTagName("head")[0].appendChild(t);var e=null,n="",a=document.getElementsByTagName("script");let o=localStorage.getItem("lead");null!=o&&null!=o&&""!=o&&adstechCreateLead(o,"FORM");for(let t=0;t<a.length;t++)if(a[t].src.indexOf("&gBtnId=")>0){var l=a[t].src.split("?")[1],i=l.split("&")[0];atLh_acId=i.split("=")[1],n=l.split("&")[1].split("=")[1]}else a[t].src.indexOf("jquery")>0&&(e=a[t].src);if(null===e||""===e){var r=document.createElement("script");r.src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(r)}var d="";if(atLh_url.indexOf("?")>0?(d=atLh_url.split("?")[1],atLh_arrTrack=d.split("&")):d=null,""==d||null==d)atLh_utm_source=null,atLh_utm_medium=null,atLh_utm_campaign=null,atLh_utm_term=null,atLh_utm_content=null,atLh_gclid=null;else for(let t=0;t<atLh_arrTrack.length;t++)0==atLh_arrTrack[t].indexOf("utm_source")?atLh_utm_source=atLh_arrTrack[t].split("=")[1]:0==atLh_arrTrack[t].indexOf("utm_medium")?atLh_utm_medium=atLh_arrTrack[t].split("=")[1]:0==atLh_arrTrack[t].indexOf("utm_campaign")?atLh_utm_campaign=atLh_arrTrack[t].split("=")[1]:0==atLh_arrTrack[t].indexOf("utm_term")?atLh_utm_term=atLh_arrTrack[t].split("=")[1]:0==atLh_arrTrack[t].indexOf("utm_content")?atLh_utm_content=atLh_arrTrack[t].split("=")[1]:0==atLh_arrTrack[t].indexOf("gclid")&&(atLh_gclid=atLh_arrTrack[t].split("=")[1]);fetchRetry(`${atLh_rqApi}/account/${atLh_acId}/group-buttons/${n}`,{method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json"})},4).then(t=>{var e=t.response.style,n=t.response.vertical,a=null,o=null,l=null,i=null;for(let e=0;e<t.response.listButton.length;e++)"CALL"==t.response.listButton[e].type?a=t.response.listButton[e]:"FORM"==t.response.listButton[e].type?o=t.response.listButton[e]:"CHAT"==t.response.listButton[e].type?atLh_styleBtnChat=t.response.listButton[e]:"FACEBOOK"==t.response.listButton[e].type?l=t.response.listButton[e]:"ZALO"==t.response.listButton[e].type&&(i=t.response.listButton[e]);adstechLeadhubWriteHtml(e,n,o,a,atLh_styleBtnChat,atLh_acId,l,i);let r=window.localStorage.getItem("leadhub_chatInfo");if(null!=r&&null!=r&&""!=r){let t=JSON.parse(r);document.getElementById("txtName").innerText=t.name,atLh_topic=t.topic}})}async function fetchRetry(t,e,n){for(let a=0;a<n;a++)try{return await fetch(t,e).then(handle).then(t=>t)}catch(t){if(a+1===n)throw t}}function handle(t){return t.text().then(e=>{const n=e&&JSON.parse(e);if(t.ok)return n;const a=n&&n.error||t.statusText;return Promise.reject(a)})}function adstechLeadhubWriteHtml(t,e,n,a,o,l,i,r){let d="",s="",c="",h="",p="",u="",m="",g="",y="",b="",f="",L="",v="",_="",x="",$="",w="",k="",C="",I="",A=`<style>\n                    ${x="45"==t.left?`.adstech-group-btn {\n            position:fixed;\n            bottom: ${t.bottom-3}%;\n            left: ${parseInt(t.left)+2}%;\n            right: ${t.right}%;\n            top:${t.top}%;\n            z-index: 99999999;\n        }`:`.adstech-group-btn {\n            position:fixed;\n            bottom: ${t.bottom-3}%;\n            left: ${parseInt(t.left)-1}%;\n            right: ${parseInt(t.right)-1}%;\n            top:${t.top}%;\n            z-index: 99999999;\n        }`}\n\n                    .adstech-btn {\n                        border: none;\n                        color: white;\n                        text-align: center;\n                        text-decoration: none;\n                        display: inline-block;\n                        margin: 4px 2px;\n                        border-radius: 50%;\n                        width: ${t.size}px;\n                        height:${t.size}px;\n                        box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.5);\n                    }\n                    \n                    #chatAdmin .input-group-sm>.form-control:not(textarea) {\n                        height: calc(1.5em + 1rem + 2px) !important;\n                    }\n                    .adstech-form {\n                        display: none;\n                        position: fixed;\n                        text-align:center;\n                        left: 50%;\n                        top: 50%;\n                        transform: translate(-50%,-50%);\n                        border: 3px solid #f1f1f1;\n                        z-index: 99999999;\n                        background-color:#fff;\n                    }\n                    #adstech-form{\n                        padding-bottom:20px\n                    }\n                    #adstech-form ::-webkit-scrollbar {\n                        width: 8px;\n                        height: 10px;\n                        z-index: 999;\n                    }\n                \n                    /* Handle */\n                    #adstech-form ::-webkit-scrollbar-thumb {\n                        -webkit-border-radius: 15px;\n                        border-radius: 15px;\n                        background: #eff2f9;\n                    }\n                    /* Add styles to the form container */\n                    .adstech-form-container {\n                        width: 400px;\n                        padding: 10px;\n                        background-color: #fff;\n                    }\n\n                    /* Full-width input fields */\n                    .adstech-form-container input[type=text],\n                    .adstech-form-container input[type=email], \n                    .adstech-form-container input[type=tel]{\n                        width: 90%;\n                        padding: 15px;\n                        margin: 5px 0 22px 0;\n                        border: none;\n                        background: #f1f1f1;\n                    }\n\n                    /* When the inputs get focus, do something */\n                    .adstech-form-container input[type=text]:focus,\n                    .adstech-form-container input[type=email]:focus,\n                    .adstech-form-container input[type=tel]:focus {\n                        background-color: #ddd;\n                        outline: none;\n                    }\n\n                    /* Set a style for the submit/login button */\n                    .adstech-form-container .btn {\n                        color: white;\n                        border: none;\n                        cursor: pointer;\n                        width: 100%;\n                        margin-bottom: 10px;\n                        opacity: 0.8;\n                        float: left;\n                        z-index: 9999999;\n                        height:40px;\n                    }\n\n                    /* Add a red background color to the cancel button */\n                    .adstech-form-container .cancel {\n                        background-color: #999;\n                    }\n\n                    /* Add some hover effects to buttons */\n                    .adstech-form-container .btn:hover,\n                    .open-button:hover {\n                        opacity: 1;\n                    }\n                    #adstech-alert {\n                        padding: 20px;\n                        background-color:#e09000;\n                        color: white;\n                        margin-bottom: 15px;\n                        display: none;\n                        width:20%;\n                        position: fixed;\n                        text-align:center;\n                        left: 50%;\n                        top: 50%;\n                        z-index: 9999999;\n                        transform: translate(-50%,-50%);\n                    }\n                    .adstech-chat-form{\n                        width:30%;\n                        margin-left:70%;\n                    }\n                    @media only screen and (max-width: 420px) {\n                        .adstech-form-container {\n                            width: 300px;\n                            padding: 10px;\n                            z-index: 99999999;\n                            background-color: #fff;\n                        }\n                        .adstech-chat-form{\n                            width:80%;\n                            margin-left:10%\n                        }\n                    }\n                    @media screen and (max-width: 1024px) and (min-width: 450px) {\n                        .adstech-chat-form{\n                            width:40%;\n                            margin-left:60%\n                        }\n                    }\n                </style>`;if(null==a||""==a?s="":navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?("#fff"==t.color?s=`<button class="adstech-btn" onclick="atLhOpenCall()" style="background-color:${a.buttonColor}">\n                            <a href="tel:${a.phoneNumber}" style="width:100%;height:100%">\n                                <img src="https://leadpool.adstech.vn/call-white.png" alt="Gọi điện thoại" width="${t.size/1.5}" height="${t.size/1.5}">\n                            </a>\n                        </button>`:"#000"==t.color&&(s=`<button class="adstech-btn" onclick="atLhOpenCall()" style="background-color:${a.buttonColor}">\n                            <a href="tel:${a.phoneNumber}" style="width:100%;height:100%">\n                                <img src="https://leadpool.adstech.vn/call-black.png" alt="Gọi điện thoại" width="${t.size/1.5}" height="${t.size/1.5}">\n                            </a>\n                        </button>`),atlh_check_devide=!1):("#fff"==t.color?s=`<button class="adstech-btn" onclick="atLhOpenFormCall()" style="background-color:${a.buttonColor}">\n                            <a style="width:100%;height:100%">\n                                <img src="https://leadpool.adstech.vn/call-white.png" alt="Gọi điện thoại" width="${t.size/1.5}" height="${t.size/1.5}">\n                            </a>\n                        </button>`:"#000"==t.color&&(s=`<button class="adstech-btn" onclick="atLhOpenFormCall()" style="background-color:${a.buttonColor}">\n                            <a style="width:100%;height:100%">\n                                <img src="https://leadpool.adstech.vn/call-black.png" alt="Gọi điện thoại" width="${t.size/1.5}" height="${t.size/1.5}">\n                            </a>\n                        </button>`),I=`<div class="adstech-form" id="adstech-call"><form class="adstech-form-container" id="call-adstech" method="POST">\n                            <h3>Để lại thông tin để chúng tôi liên hệ với bạn</h3>\n                            <input type="text" placeholder="Họ và tên" name="nameCall" required>\n                            <input type="tel" placeholder="Số điện thoại" pattern="[0]{1}[0-9]{9}" title="Nhập đúng số điện thoại của bạn" name="phoneCall" required>\n                            <div style="padding:0px 14px 0px 14px">\n                                <button type="submit" class="btn" style="background-color:${a.buttonColor};">${n.description}</button>\n                            </div>\n                        </form></div>`,$="<br />",atlh_check_devide=!0),null==o||""==o?h="":("#fff"==t.color?h=`<button class="adstech-btn" style="background-color:${o.buttonColor}" onclick="openChat()">\n                    <img src="https://leadpool.adstech.vn/question_answer-white.png" alt="Chat" width="${t.size/1.5}" height="${t.size/1.5}">\n                </button>`:"#000"==t.color&&(h=`<button class="adstech-btn" style="background-color:${o.buttonColor}" onclick="openChat()">\n                    <img src="https://leadpool.adstech.vn/question_answer-black.png" alt="Chat" width="${t.size/1.5}" height="${t.size/1.5}">\n                </button>`),k="<br />",m=`\n            <div class="container" id="chatInputInfo" style="z-index: 99999999; display: none;  position: fixed; bottom: 5%; right: 5%; padding:10px">\n                <div style="width:100%">\n                    <div class="adstech-chat-form">\n                        <div style="width:100%">\n                            <div style="width:100%">\n                                <div class="panel" style="border: 1px solid ${o.buttonColor}">\n                                    <div class="panel-heading" style="padding:10px;border: 1px solid ${o.buttonColor}; background-color: ${o.buttonColor};">\n                                        <h6 style="color: white; margin:auto" class="panel-title">Hãy cho chúng tôi biết bạn là ai</h6>\n                                    </div> \n                                    <div class="panel-footer" style="padding:15px; background-color:#fff"> \n                                        <form id="atLhSendInfo" method="POST">\n                                            <div class="input-group input-group-sm" style="width: 100%">\n                                                <input style="width: 100%" type="text" class="form-control" required name="name" placeholder="Tên">\n                                                <input style="width: 100%" type="text" class="form-control" required name="topic" placeholder="Email/Số điện thoại">\n                                            </div>\n                                            <br>\n                                            <div class="input-group-btn">\n                                                <button style="color: white; background-color: ${o.buttonColor};" class="btn btn-block" type="submit" id="btnSend">Chat</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,g=`\n            <div class="container" id="chatAdmin" style="z-index: 99999999; display: none; position: fixed; bottom: 5%; right: 5%"> \n                <div style="width:100%">\n                    <div class="adstech-chat-form">\n                        <div style="width:100%">\n                            <div style="width:100%">\n                                <div style="border: 1px solid ${o.buttonColor}">\n                                    <div style="padding:10px;border: 1px solid ${o.buttonColor}; background-color: ${o.buttonColor};">\n                                        <h6 class="panel-title" style="color: white; ">Xin chào, <span id="txtName"></span>. Hãy chat với chúng tôi</h6>\n                                    </div>\n                                    <div style="height: 350px;background-color:#fff; overflow-y: scroll;">\n                                        <div style="width:100%">\n                                            <div style="width:100% id="scollDiv"; >\n                                                <table class="table" id="messageContainer">\n                                                    <tr></tr>\n                                                </table>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div style="background-color:#fff">\n                                        <form id="atLhSendessage" method="POST">\n                                            <div class="input-group input-group-sm">\n                                                <input type="text" required class="form-control" id="txtText" placeholder="nói gì đó ..">\n                                                <span class="input-group-btn">\n                                                    <button class="btn" style="color: white; background-color: ${o.buttonColor};" type="submit" id="btnSend">Gửi</button>\n                                                </span>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `),null==n||""==n)c="",y="";else{for(let t=0;t<n.properties.length;t++)"email"==n.properties[t]?f='<input type="email" placeholder="Địa chỉ email" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$" title="Nhập đúng email của bạn" required>':"lastName"==n.properties[t]?L='<input type="text" placeholder="Họ và tên" name="name" required>':"phone"==n.properties[t]?b='<input type="tel" placeholder="Số điện thoại" pattern="[0]{1}[0-9]{9}" title="Nhập đúng số điện thoại của bạn" name="phone" required>':"city"==n.properties[t]?v='<input type="text" placeholder="Địa chỉ" name="city" required>':"bussiness"==n.properties[t]&&(_='<input type="text" placeholder="Nghề nghiệp" name="bussiness" required>');"#fff"==t.color?c=`<button class="adstech-btn" style="background-color:${n.buttonColor}" onclick="atLhOpenFrom()">\n                    <img src="https://leadpool.adstech.vn/mail-white.png" alt="Đăng ký ngay" width="${t.size/1.5}" height="${t.size/1.5}">\n                </button>`:"#000"==t.color&&(c=`<button class="adstech-btn" style="background-color:${n.buttonColor}" onclick="atLhOpenFrom()">\n                    <img src="https://leadpool.adstech.vn/mail-black.png" alt="Đăng ký ngay" width="${t.size/1.5}" height="${t.size/1.5}">\n                </button>`),y=`<div class="adstech-form" id="adstech-form">\n                    <div style="float:right;margin-top:5px; margin-right:10px; color:red"><button onclick="document.getElementById('adstech-form').style.display='none'" style="border-radius:50%; background:#fff; box-shadow:none;border: none; width:20px;height:20px;font-size:25px">&times;</button></div>\n                    <form class="adstech-form-container" id="form-adstech" method="POST">\n                        <h3>${n.title}</h3>\n                        ${L}\n                        ${b}\n                        ${f}\n                        ${v}\n                        ${_}\n                        <div style="padding:0px 14px 0px 14px">\n                            <button type="submit" class="btn" style="background-color:${n.buttonColor};">${n.description}</button>\n                        </div>\n                    </form>\n                </div>\n                \n                <div id="adstech-alert">\n                    ${n.formMessageReturn}\n                </div>`,w="<br />"}null==i||""==i?p="":(atLh_fb=`https://m.me/${i.phoneNumber}`,p='<button class="adstech-btn" style="padding:0px" onclick="atLhOpenFacebook()"><a><img src="https://leadpool.adstech.vn/mess.png" id="adstech-open-fb" alt="Facebook" width="100%" height="100%"></a></button>'),null==r||""==r?u="":(atLh_zl=`https://zalo.me/${r.phoneNumber}`,u='<button class="adstech-btn" style="padding:0px" onclick="atLhOpenZalo()"><a><img src="https://leadpool.adstech.vn/zalo.png" id="adstech-open-zl" alt="Zalo" width="100%" height="100%"></a></button>',C="<br />"),d=0==e?`\n                <div class="adstech-group-btn">\n                    ${p}\n                    ${C}\n                    ${u}\n                    ${w}\n                    ${c}\n                    ${$}\n                    ${s}\n                    ${k}\n                    ${h}\n                </div>\n                ${m}\n                ${g}\n                ${y}\n                ${A}\n                ${I}\n                `:`\n                <div class="adstech-group-btn">\n                    ${s}\n                    ${c}\n                    ${h}\n                    ${p}\n                    ${u}\n                </div>\n                ${m}\n                ${g}\n                ${y}\n                ${A}\n                ${I}`;let B=document.createElement("div");B.id="adstech-group-btn",document.body.appendChild(B),document.getElementById("adstech-group-btn").innerHTML=d,null!=n&&""!=n&&atLhSend(l),null!=atLh_styleBtnChat&&""!=atLh_styleBtnChat&&(atLh_chatminiCRM=new Firebase("https://leadpoolproduct.firebaseio.com/"),atLhConnectToFirebase()),1==atlh_check_devide&&null!=a&&""!=a&&atLhOpenCall()}function openChat(){let t=document.getElementById("chatInputInfo"),e=document.getElementById("chatAdmin");if("block"==t.style.display||"block"==e.style.display)t.style.display="none",e.style.display="none";else{let e=window.localStorage.getItem("leadhub_chatInfo");if(null!=e&&null!=e&&""!=e){let t=JSON.parse(e);atLh_chatminiCRM.child(atLh_topic).on("child_added",function(e){var n=e.val();let a="";1!=n.isCustomer&&null!=n.isCustomer||(a=""),0==n.isCustomer&&(a=" (Admin)");let o="";o=n.name==t.name?`<tr style="padding-top: 5%;">\n                        <td style="border-radius: 10px; max-width: 80%; float: right; background-color: ${atLh_styleBtnChat.buttonColor}; color: white; margin-right: 2%; margin-top: 2%;">${n.name}${a}: ${n.message}</td>\n                    </tr>`:`<tr style="padding-top: 5%;">\n                        <td style="border-radius: 10px; max-width: 80%; float: left; background-color: #e5e5e5; margin-left: 2%; margin-top: 2%;">${n.name}${a}: ${n.message}</td>\n                    </tr>`,$("#messageContainer tr:last").after(o),$("#scollDiv").animate({scrollTop:$("#scollDiv")[0].scrollHeight},0)}),atLhStartChatting()}else t.style.display="block";document.getElementById("adstech-form").style.display="none",document.getElementById("adstech-call").style.display="none"}}function atLhOpenFrom(){"block"==document.getElementById("adstech-form").style.display?document.getElementById("adstech-form").style.display="none":(document.getElementById("adstech-form").style.display="block",document.getElementById("adstech-call").style.display="none",document.getElementById("chatInputInfo").style.display="none",document.getElementById("chatAdmin").style.display="none")}function atLhOpenCall(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))atLhSendTracing("CALL");else{document.getElementById("call-adstech").addEventListener("submit",t=>{const e=new FormData(t.target);let n=e.get("nameCall"),a=e.get("phoneCall"),o=[{property:"accountId",value:atLh_acId},{property:"lastName",value:n},{property:"phone",value:a}];t.preventDefault(),adstechCreateLead(o,"CALL"),atLhSendTracing("CALL")})}}function atLhOpenFormCall(){"block"==document.getElementById("adstech-call").style.display?document.getElementById("adstech-call").style.display="none":(document.getElementById("adstech-call").style.display="block",document.getElementById("adstech-form").style.display="none",document.getElementById("chatInputInfo").style.display="none",document.getElementById("chatAdmin").style.display="none")}function atLhCloseForm(){document.getElementById("adstech-form").style.display="none"}function atLhOpenAlert(){document.getElementById("adstech-alert").style.display="block"}function atLhCloseAlert(){document.getElementById("adstech-alert").style.display="none"}function atLhOpenFacebook(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){atLhSendTracing("FACEBOOK"),document.getElementById("adstech-open-fb").classList.add("at-onclick-fb"),window.location=atLh_fb}else{atLhSendTracing("FACEBOOK"),document.getElementById("adstech-open-fb").classList.add("at-onclick-fb"),window.open(atLh_fb)}}function atLhOpenZalo(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){atLhSendTracing("ZALO"),document.getElementById("adstech-open-zl").classList.add("at-onclick-zl"),window.location=atLh_zl}else{atLhSendTracing("ZALO"),document.getElementById("adstech-open-zl").classList.add("at-onclick-zl"),window.open(atLh_zl)}}function atLhGetHour(t){let e="";return e=t.split(" ")[3]}function atLhConnectToFirebase(){document.getElementById("atLhSendInfo").addEventListener("submit",t=>{const e=new FormData(t.target);let n=e.get("name");atLh_topic=e.get("topic"),adstechCreateLead([{property:"accountId",value:atLh_acId},{property:"lastName",value:n},{property:"email",value:atLh_topic}],"CHAT"),document.getElementById("txtName").innerText=n;let a={name:n,topic:atLh_topic=atLh_acId+"-"+atLh_topic.replace(/\./g,"-dot-")};window.localStorage.setItem("leadhub_chatInfo",JSON.stringify(a)),atLh_chatminiCRM.child(atLh_topic).on("child_added",function(t){let e=t.val(),n="";1!=e.isCustomer&&null!=e.isCustomer||(n=""),0==e.isCustomer&&(n=" (Admin)");let o="";o=e.name==a.name?`\n                <tr style="padding-top: 5%;">\n                    <td style="border-radius: 10px; max-width: 80%; float: right; background-color: ${atLh_styleBtnChat.buttonColor}; color: white; margin-right: 2%; margin-top: 2%;">\n                        ${e.name}${n}: ${e.message}\n                    </td>\n                </tr>`:`\n                <tr style="padding-top: 5%;">\n                    <td style="border-radius: 10px; max-width: 80%; float: left; background-color: #e5e5e5; margin-left: 2%; margin-top: 2%;">\n                        ${e.name}${n}: ${e.message}\n                    </td>\n                </tr>`,$("#messageContainer tr:last").after(o),$("#scollDiv").animate({scrollTop:$("#scollDiv")[0].scrollHeight},0)}),t.preventDefault(),atLhStartChatting()})}function atLhStartChatting(){document.getElementById("chatInputInfo").style.display="none",document.getElementById("chatAdmin").style.display="block",document.getElementById("atLhSendessage").addEventListener("submit",t=>{let e=$("#txtText").val();if(""!=e)try{atLhSendessage({topic:atLh_topic,name:document.getElementById("txtName").innerText,message:e,accountId:atLh_acId,isCustomer:!0}),document.getElementById("txtText").value=""}catch(t){alert(t)}t.preventDefault()})}function atLhSendessage(t){fetchRetry(`${atLh_rqApi}/chats`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)},5).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}function atLhSend(t){document.getElementById("form-adstech").addEventListener("submit",e=>{const n=new FormData(e.target);let a=n.get("email"),o=n.get("name"),l=n.get("phone"),i=n.get("city"),r=n.get("bussiness"),d=[{property:"accountId",value:t},{property:"email",value:a}];if(null!=o&&""!=o&&null!=o){let t={property:"lastName",value:o};d.push(t)}if(null!=l&&""!=l&&null!=l){let t={property:"phone",value:l};d.push(t)}if(null!=i&&""!=i&&null!=i){let t={property:"city",value:i};d.push(t)}if(null!=r&&""!=r&&null!=r){let t={property:"bussiness",value:r};d.push(t)}adstechCreateLead(d,"FORM"),atLhSendTracing("FORM"),e.preventDefault(),atLhCloseForm()})}function adstechCreateLead(t,e){fetchRetry(`${atLh_rqApi}/contacts?source_from_mar=${e}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)},4).then(e=>{"200"==e.status?(localStorage.removeItem("lead"),atLhOpenAlert(),setTimeout(function(){atLhCloseAlert()},3e3)):(localStorage.setItem("lead",JSON.stringify(t)),atLhOpenAlert(),setTimeout(function(){atLhCloseAlert()},3e3))})}function atLhSendTracing(t){let e={type:t,accountId:atLh_acId,link:atLh_url};null!=atLh_utm_source&&(e.utm_source=atLh_utm_source),null!=atLh_utm_medium&&(e.utm_medium=atLh_utm_medium),null!=atLh_utm_campaign&&(e.utm_campaign=atLh_utm_campaign),null!=atLh_utm_term&&(e.utm_term=atLh_utm_term),null!=atLh_utm_content&&(e.utm_content=atLh_utm_content),null!=atLh_gclid&&(e.gclid=atLh_gclid),fetchRetry(`${atLh_rqApi}/tracking-source-utm`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)},4).then(t=>{console.log(t)})}